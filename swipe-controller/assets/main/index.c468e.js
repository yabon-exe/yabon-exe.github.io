window.__require=function e(t,i,c){function r(s,n){if(!i[s]){if(!t[s]){var a=s.split("/");if(a=a[a.length-1],!t[a]){var l="function"==typeof __require&&__require;if(!n&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var h=i[s]={exports:{}};t[s][0].call(h.exports,function(e){return r(t[s][1][e]||e)},h,h.exports,e,t,i,c)}return i[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<c.length;s++)r(c[s]);return r}({player:[function(e,t,i){"use strict";cc._RF.push(t,"d7330XGxVxB44hRaFIYja1e","player");var c=this&&this.__decorate||function(e,t,i,c){var r,o=arguments.length,s=o<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,i):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,c);else for(var n=e.length-1;n>=0;n--)(r=e[n])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});const{ccclass:r,property:o}=cc._decorator;let s=class extends cc.Component{constructor(){super(...arguments),this.touchController=null,this.rigidBody=null}onLoad(){cc.director.getPhysicsManager().enabled=!0,this.touchController=cc.find("touch-controller",this.node.parent).getComponent("touch-controller"),this.rigidBody=this.node.getComponent(cc.RigidBody)}start(){}update(){if(this.touchController.swiping){let e=this.touchController.swipeVec;this.rigidBody.linearVelocity=e}else this.rigidBody.linearVelocity=cc.v2(0,0)}};s=c([r],s),i.default=s,cc._RF.pop()},{}],"touch-controller":[function(e,t,i){"use strict";cc._RF.push(t,"dbe55ekV8xCC52UqYAOMSl2","touch-controller");var c=this&&this.__decorate||function(e,t,i,c){var r,o=arguments.length,s=o<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,i):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,c);else for(var n=e.length-1;n>=0;n--)(r=e[n])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});const{ccclass:r,property:o}=cc._decorator;let s=class extends cc.Component{constructor(){super(...arguments),this.canvas=null,this.graphics=null,this.camera=null,this.controllerLineStart=cc.v2(0,0),this.swipeVecBase=cc.v2(0,0),this.swiping=!1,this.swipeVec=cc.v2(0,0),this.swipeScale=1,this.swipeDistanceLimit=500}resetLatestLocation(e){this.controllerLineStart=e}drawSwipeLine(){this.graphics.clear();let e=this.swipeVec.mag()/5;e>this.swipeDistanceLimit&&(e=this.swipeDistanceLimit);let t=cc.v2(this.controllerLineStart.x+this.swipeVecBase.x,this.controllerLineStart.y+this.swipeVecBase.y);this.graphics.lineWidth=e/5,this.graphics.strokeColor=cc.Color.WHITE,this.graphics.strokeColor.setA(128),this.graphics.moveTo(this.controllerLineStart.x,this.controllerLineStart.y),this.graphics.lineTo(t.x,t.y),this.graphics.stroke()}clearGraphics(){this.graphics.clear()}screenToWorldPoint(e){let t=e,i=this.canvas.getContentSize(),c=t.x-i.width/2,r=t.y-i.height/2;return t.x=c,t.y=r,t}updateSwipeVec(e){let t=e.x-this.controllerLineStart.x,i=e.y-this.controllerLineStart.y;this.swipeVecBase=cc.v2(t,i),this.swipeVec=cc.v2(t*this.swipeScale,i*this.swipeScale)}resetSwipeVec(){this.swipeVec=cc.v2(0,0)}onLoad(){this.canvas=this.node.parent,this.camera=cc.Camera.findCamera(this.node),this.graphics=this.node.getComponent(cc.Graphics),this.canvas.on(cc.Node.EventType.TOUCH_START,e=>{let t=this.screenToWorldPoint(e.getLocation());this.resetLatestLocation(t),this.swiping=!0,this.resetSwipeVec()}),this.canvas.on(cc.Node.EventType.TOUCH_MOVE,e=>{let t=this.screenToWorldPoint(e.getLocation());this.updateSwipeVec(t),this.drawSwipeLine()}),this.canvas.on(cc.Node.EventType.TOUCH_END,e=>{e.getLocation(),this.swiping=!1,this.resetSwipeVec(),this.clearGraphics()}),this.canvas.on(cc.Node.EventType.TOUCH_CANCEL,e=>{e.getLocation(),this.swiping=!1,this.resetSwipeVec(),this.clearGraphics()})}start(){}update(e){}};c([o],s.prototype,"swiping",void 0),c([o(cc.Vec2)],s.prototype,"swipeVec",void 0),c([o],s.prototype,"swipeScale",void 0),c([o],s.prototype,"swipeDistanceLimit",void 0),s=c([r],s),i.default=s,cc._RF.pop()},{}]},{},["player","touch-controller"]);